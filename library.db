import sqlite3

# Connect to the SQLite database (it will be created if it doesn't exist)
conn = sqlite3.connect("library.db")
cursor = conn.cursor()

# Create the `books` table if it doesn't exist
cursor.execute("""
CREATE TABLE IF NOT EXISTS books (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT UNIQUE NOT NULL,
    status TEXT NOT NULL DEFAULT 'Available'
)
""")

# Create the `borrowed_books` table if it doesn't exist
cursor.execute("""
CREATE TABLE IF NOT EXISTS borrowed_books (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    book_id INTEGER NOT NULL,
    student_name TEXT NOT NULL,
    return_date TEXT NOT NULL,
    FOREIGN KEY (book_id) REFERENCES books (id)
)
""")

# Sample books for demonstration
sample_books = ["Book 1", "Book 2", "Book 3"]
for book in sample_books:
    try:
        cursor.execute("INSERT INTO books (name) VALUES (?)", (book,))
    except sqlite3.IntegrityError:
        pass  # Ignore if the book already exists

# Commit changes and close the connection
conn.commit()
conn.close()
